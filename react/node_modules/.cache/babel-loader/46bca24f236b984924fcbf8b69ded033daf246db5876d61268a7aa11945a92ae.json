{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import{useCart}from\"../context/CartContext\";import ApiService from\"../../service/ApiService\";import'../../style/productDetailsPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductDetailsPage=()=>{const{productId}=useParams();const{cart,dispatch}=useCart();const[product,setProduct]=useState(null);useEffect(()=>{fetchProduct();},[productId]);const fetchProduct=async()=>{try{const response=await ApiService.getProductById(productId);setProduct(response.product);}catch(error){console.log(error.message||error);}};const addToCart=()=>{if(product){dispatch({type:'ADD_ITEM',payload:product});}};const incrementItem=()=>{if(product){dispatch({type:'INCREMENT_ITEM',payload:product});}};const decrementItem=()=>{if(product){const cartItem=cart.find(item=>item.id===product.id);if(cartItem&&cartItem.quantity>1){dispatch({type:'DECREMENT_ITEM',payload:product});}else{dispatch({type:'REMOVE_ITEM',payload:product});}}};if(!product){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading product details ...\"});}const cartItem=cart.find(item=>item.id===product.id);return/*#__PURE__*/_jsxs(\"div\",{className:\"product-detail\",children:[/*#__PURE__*/_jsx(\"img\",{src:product===null||product===void 0?void 0:product.imageUrl,alt:product===null||product===void 0?void 0:product.name}),/*#__PURE__*/_jsx(\"h1\",{children:product===null||product===void 0?void 0:product.name}),/*#__PURE__*/_jsx(\"p\",{children:product===null||product===void 0?void 0:product.description}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",product.price.toFixed(2)]}),cartItem?/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:decrementItem,children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{children:cartItem.quantity}),/*#__PURE__*/_jsx(\"button\",{onClick:incrementItem,children:\"+\"})]}):/*#__PURE__*/_jsx(\"button\",{onClick:addToCart,children:\"Add To Cart\"})]});};export default ProductDetailsPage;","map":{"version":3,"names":["React","useEffect","useState","useParams","useCart","ApiService","jsx","_jsx","jsxs","_jsxs","ProductDetailsPage","productId","cart","dispatch","product","setProduct","fetchProduct","response","getProductById","error","console","log","message","addToCart","type","payload","incrementItem","decrementItem","cartItem","find","item","id","quantity","children","className","src","imageUrl","alt","name","description","price","toFixed","onClick"],"sources":["C:/Mahesh/Spring-POC/e-commerse-full-app/react/src/component/pages/ProductDetailsPage.jsx"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useCart } from \"../context/CartContext\";\nimport ApiService from \"../../service/ApiService\";\nimport '../../style/productDetailsPage.css';\n\n\nconst ProductDetailsPage = () => {\n\n    const {productId} = useParams();\n    const {cart, dispatch} = useCart();\n    const [product, setProduct] = useState(null);\n\n    useEffect(()=>{\n        fetchProduct();\n    }, [productId])\n\n    const fetchProduct = async () => {\n        try {\n            const response = await ApiService.getProductById(productId);\n            setProduct(response.product);\n            \n        } catch (error) {\n            console.log(error.message || error)\n        }\n    }\n\n    \n    const addToCart = () => {\n        if (product) {\n            dispatch({type: 'ADD_ITEM', payload: product});   \n        }\n    }\n\n    const incrementItem = () => {\n        if(product){\n            dispatch({type: 'INCREMENT_ITEM', payload: product});\n \n        }\n    }\n\n    const decrementItem = () => {\n        if (product) {\n            const cartItem = cart.find(item => item.id === product.id);\n            if (cartItem && cartItem.quantity > 1) {\n                dispatch({type: 'DECREMENT_ITEM', payload: product}); \n            }else{\n                dispatch({type: 'REMOVE_ITEM', payload: product}); \n            }\n            \n        }\n    }\n\n    if (!product) {\n        return <p>Loading product details ...</p>\n    }\n\n    const cartItem = cart.find(item => item.id === product.id);\n\n    return(\n        <div className=\"product-detail\">\n            <img src={product?.imageUrl} alt={product?.name} />\n            <h1>{product?.name}</h1>\n            <p>{product?.description}</p>\n            <span>${product.price.toFixed(2)}</span>\n            {cartItem ? (\n                <div className=\"quantity-controls\">\n                    <button onClick={decrementItem}>-</button>\n                    <span>{cartItem.quantity}</span>\n                    <button onClick={incrementItem}>+</button>\n                </div>\n            ):(\n                <button onClick={addToCart}>Add To Cart</button>\n            )}\n\n        </div>\n    )\n\n}\n\nexport default ProductDetailsPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}